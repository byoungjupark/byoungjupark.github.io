---
title : "TIL35. TCP"
excerpt : "TCP의 개념, OSI 7계층과 TCP/IP 4계층"
---

지금까지 프로젝트를 진행하면서 프론트엔드와 communicate를 할 때 HTTP 통신을 이용해 Rest API를 사용했다.
채팅같은 경우는 db에 접근할 필요가 없기 때문에 API 서버가 아닌 다른 서버나 통신방법이 필요할 것이다.
이 때 사용하는 것이 TCP 방식이다.
<br>

HTTP 방식으로 사용한다면 유저1 - 서버 - 유저2 의 흐름으로 항상 서버를 거치게 된다.
유저별 채팅이 많거나 단체 채팅방이라면 서버의 작업량이 늘어날 것이다.
이는 성능 저하와 주고받는 채팅 속도 저하로도 이어질 수 있다.
TCP 방식으로 채팅 서버를 구현해놓고, 채팅서버를 켜놓기만 하면 유저들간의 메세지를 전달할 수 있다.
<br>

오늘은 TCP에 대해 알아보자.

## 1. TCP (Transmission Control Protocol)
TCP는 많은 양의 데이터를 가져와서 패킷으로 컴파일 한 다음 동료 TCP계층에서 수신하도록 전송하여 패킷을 유용한 정보와 데이터로 바꾸는 역할을 한다.
> **패킷**
데이터를 일정한 크기로 자른 단위, 인터넷에서 정보를 전달하는 단위

## 2. TCP/IP 4계층
TCP를 검색하면 TCP/IP가 연관검색어로 가장 많이 뜬다.
여기서 네트워크의 구조 계층을 살펴보도록 하자.
우선 IP는 Internet Protocol의 약자로 인터넷에서 컴퓨터의 위치를 찾아서 데이터를 전송하게 위해 지켜야 하는 규약이다. 

![스크린샷 2021-10-28 오후 8 22 04](https://user-images.githubusercontent.com/63541271/139258347-be39bf42-03e9-4d86-80ac-e4dd3a26b0cf.png)

OSI 7계층은 통신이 일어나는 과정을 7단계로 구분한 것이다. 
TCP/IP가 많이 사용되면서 기존 OSI 7계층을 축약한 TCP/IP 4계층이 등장했다. 
- 네트워크 액세스 계층(물리계층, 데이터링크계층)
- 인터넷 계층(네트워크계층)
- 전송 계층(전송계층)
- 응용 계층(세션계층, 표현계층, 응용계층)

### 1. 네트워크 액세스 계층(Network Access Layer)
물리계층과 데이터링크계층을 포함한다. 
TCP/IP 패킷을 네트워크 매체에 전달하고 받아들이는 과정을 담당한다.
- 물리계층 (Physical Layer): 물리장치에 대한 전압, 전기적 명세를 정의한다. 단지 데이터전달의 역할을 한다.
- 데이터링크계층 (DataLink Layer): 전송단위는 Frame을 사용하고, 주소는 Mac을 사용한다.
물리계층의 전송설비를 링크로 변환하여 상위계층인 네트워크계층에게 오류없는 물리계층으로 보이도록 한다. 
ex. 스위치, ethernet

### 2. 인터넷 계층 (Internet Layer)
어드레싱, 패키징, 라우팅 기능을 제공한다. 연결성을 제공한다.
- 네트워크계층(Network Layer): 전송단위는 Packet을 사용, 주소는 IP를 사용한다. 라우팅(데이터가 가야할 길을 찾는 기능)의 대부분이 네트워크 계층에서 발생한다. 데이터를 패킷 단위로 쪼개어 전송한다. 데이터가 전송될 수 있는 모든 경우의 수 중 가장 효과적인 라우팅 방법을 찾는 역할을 한다.
ex. 라우터, IP
<br>

프로토콜 종류 : IP, ARP, RARP

### 3. 전송 계층(Transport Layer)
애플레케이션 계층의 세션과 데이터그램 통신서비스를 제공한다. 
- 전송계층 (Transport Layer): 전송단위는 Segment, 주소는 Port를 사용한다. 전송계층은 보내고자 하는 데이터의 용량과 속도, 목적지를 처리한다.
전송 계층에서 대표적인 것이 TCP이다. TCP는 IP 위에 구축되기 때문에 TCP/IP로 알려져 있다.
<br>

프로토콜 종류 : TCP, UDP

### 4. 응용 계층(Application Layer)
프로그램이 직접 상호작용하는 계층으로 데이터를 처음으로 받는 곳이다.
애플레케이션들이 데이터를 교환하기 위해 사용하는 프로토콜을 정의하고, TCP/UDP 기반의 응용프로그램을 구현할 때 사용한다.

- 세션계층 (Session Layer): 전송단위는 message. 실제 네트워크 연결이 이루어진다. 두대의 기기가 대화하기 위해 하나의 세션이 열려야 한다. 프로세스간의 통신을 제어하고, 통신과정이 진행될 때 동기화를 유지한다.
ex. SAP, SDP, NetBIOS
- 표현계층 (Presentational Layer): 전송단위는 message. 응용프로그램 형식을 네트워크 형식으로 변환하거나 그 반대가 일어나는 계층. 데이터를 안전하게 주고 받기 위해 암호화와 복화하가 필요한데 이 과정이 여기서 이루어진다.
ex. ASCII, MPEG, MIDI
- 응용계층 (Application Layer): 전송단위는 message. 사용자가 인터페이스에 접근할 수 있도록 인터페이스를 제공하는 계층. 크롬과 같은 브라우저나 응용프로그램이 응용계층에서 동작한다.
ex. HTTP, SMTP, FTP
<br>

프로토콜 종류 : HTTP, SSH, FTP
<br>
서론에서 말했던 API는 HTTP 기반의 Rest API로 TCP/IP 기반의 HTTP 프로토콜을 사용하여 통신하는 것이다.
